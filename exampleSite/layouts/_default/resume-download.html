{{ define "head" }}
<meta name="description" content="Download {{ .Site.Params.title }} Resume">
<link rel="stylesheet" href="{{.Site.Params.staticPath}}/css/single.css">
<script defer src="{{.Site.Params.staticPath}}/fontawesome-6/all-6.4.2.js"></script>
{{ end }}

{{ define "title" }}
Resume Download | {{ .Site.Title }}
{{ end }}

{{ define "main" }}
<section id="resume-download" class="py-5">
  <div class="container">
    <div class="row justify-content-center">
      <div class="col-lg-8">
        <div class="download-container p-5 bg-light rounded shadow">
          <div class="text-center mb-4">
            <i class="fas fa-file-pdf fa-4x text-primary mb-4"></i>
            <h2 class="mb-3">Access My Resume</h2>
            <p class="lead">I'd love to connect! Please provide your details and I'll send you my resume.</p>
          </div>

          <form id="resumeForm" class="needs-validation" novalidate>
            <div class="row">
              <div class="col-md-6 mb-3">
                <label for="firstName" class="form-label">First Name *</label>
                <input type="text" class="form-control" id="firstName" name="firstName" required>
                <div class="invalid-feedback">Please provide your first name.</div>
              </div>
              <div class="col-md-6 mb-3">
                <label for="lastName" class="form-label">Last Name *</label>
                <input type="text" class="form-control" id="lastName" name="lastName" required>
                <div class="invalid-feedback">Please provide your last name.</div>
              </div>
            </div>

            <div class="mb-3">
              <label for="email" class="form-label">Your Email Address *</label>
              <input type="email" class="form-control" id="email" name="email" required>
              <div class="invalid-feedback">Please provide a valid email address.</div>
            </div>

            <div class="mb-3">
              <label for="company" class="form-label">Company/Organization</label>
              <input type="text" class="form-control" id="company" name="company">
            </div>

            <div class="mb-3">
              <label for="purpose" class="form-label">What's your interest? *</label>
              <select class="form-select" id="purpose" name="purpose" required>
                <option value="">Select an option</option>
                <option value="job_opportunity">Job Opportunity</option>
                <option value="collaboration">Collaboration</option>
                <option value="networking">Networking</option>
                <option value="consulting">Consulting</option>
                <option value="other">Other</option>
              </select>
              <div class="invalid-feedback">Please select your purpose.</div>
            </div>

            <div class="mb-4">
              <label for="message" class="form-label">Tell me about yourself and your interest *</label>
              <textarea class="form-control" id="message" name="message" rows="4" placeholder="Hi Mohith, I'm interested in..." required></textarea>
              <div class="invalid-feedback">Please provide a brief introduction.</div>
            </div>

            <div class="text-center">
              <button type="submit" class="btn btn-primary btn-lg px-5">
                <i class="fas fa-envelope me-2"></i>
                Send Resume Request
              </button>
            </div>
          </form>

          <div class="mt-4 text-center">
            <small class="text-muted">
              <i class="fas fa-shield-alt me-1"></i>
              Your information is secure and will only be used for professional communication.
            </small>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>

<script>
document.getElementById('resumeForm').addEventListener('submit', function(e) {
  e.preventDefault();

  // Validate form
  if (!this.checkValidity()) {
    e.stopPropagation();
    this.classList.add('was-validated');
    return;
  }

  // Get form data
  const formData = new FormData(this);
  const data = {
    firstName: formData.get('firstName'),
    lastName: formData.get('lastName'),
    email: formData.get('email'),
    company: formData.get('company'),
    purpose: formData.get('purpose'),
    message: formData.get('message')
  };

  // Create email content
  const subject = encodeURIComponent(`RESUME REQUEST - ${data.firstName} ${data.lastName}`);

  let emailBody = `Hi Mohith,\n\n`;
  emailBody += `My name is ${data.firstName} ${data.lastName}`;
  if (data.company) emailBody += ` from ${data.company}`;
  emailBody += `.\n\n`;
  emailBody += `I'm interested in: ${data.purpose.replace('_', ' ')}\n\n`;
  emailBody += `${data.message}\n\n`;
  emailBody += `My contact information:\n`;
  emailBody += `Email: ${data.email}\n`;
  if (data.company) emailBody += `Company: ${data.company}\n`;
  emailBody += `\nI'd love to receive your resume and learn more about potential opportunities.\n\n`;
  emailBody += `Best regards,\n${data.firstName} ${data.lastName}`;

  const mailtoLink = `mailto:mohith.n2022@gmail.com?subject=${subject}&body=${encodeURIComponent(emailBody)}`;

  // Open email client
  window.location.href = mailtoLink;
});
</script>

<style>
.form-control:focus, .form-select:focus {
  border-color: #0d6efd;
  box-shadow: 0 0 0 0.2rem rgba(13, 110, 253, 0.25);
}

.btn-primary {
  background-color: #0d6efd;
  border-color: #0d6efd;
}

.btn-primary:hover {
  background-color: #0b5ed7;
  border-color: #0a58ca;
}

.invalid-feedback {
  display: block;
}

.was-validated .form-control:invalid {
  border-color: #dc3545;
}

.was-validated .form-control:valid {
  border-color: #198754;
}

.download-container {
  background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
  border: 1px solid #dee2e6;
}

.step-content {
  min-height: 400px;
}

.success-icon {
  animation: bounce 2s infinite;
}

@keyframes bounce {
  0%, 20%, 50%, 80%, 100% {
    transform: translateY(0);
  }
  40% {
    transform: translateY(-10px);
  }
  60% {
    transform: translateY(-5px);
  }
}

.progress {
  height: 10px;
  border-radius: 5px;
}

.email-info {
  border-left: 4px solid #0dcaf0;
}

/* Force black text for form elements in both light and dark modes */
#resume-download .form-label,
#resume-download .form-control,
#resume-download .form-select,
#resume-download h2,
#resume-download h3,
#resume-download h4,
#resume-download h5,
#resume-download h6,
#resume-download p,
#resume-download .lead,
#resume-download .alert,
#resume-download .text-muted,
#resume-download small {
  color: #000000 !important;
}

/* Ensure form inputs maintain black text */
#resume-download .form-control::placeholder {
  color: #6c757d !important;
}

#resume-download .form-control:focus {
  color: #000000 !important;
}

/* Override theme colors for this section */
#resume-download .download-container {
  background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%) !important;
  color: #000000 !important;
}

/* Ensure alert text remains black */
#resume-download .alert * {
  color: #000000 !important;
}

/* Dark mode overrides */
[data-theme="dark"] #resume-download .form-label,
[data-theme="dark"] #resume-download .form-control,
[data-theme="dark"] #resume-download .form-select,
[data-theme="dark"] #resume-download h2,
[data-theme="dark"] #resume-download h3,
[data-theme="dark"] #resume-download h4,
[data-theme="dark"] #resume-download h5,
[data-theme="dark"] #resume-download h6,
[data-theme="dark"] #resume-download p,
[data-theme="dark"] #resume-download .lead,
[data-theme="dark"] #resume-download .alert,
[data-theme="dark"] #resume-download .text-muted,
[data-theme="dark"] #resume-download small {
  color: #000000 !important;
}
</style>
{{ end }}
