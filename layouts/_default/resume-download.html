{{ define "head" }}
<meta name="description" content="Contact me for resume access">
<link rel="stylesheet" href="{{.Site.Params.staticPath}}/css/single.css">
<script defer src="{{.Site.Params.staticPath}}/fontawesome-6/all-6.4.2.js"></script>
{{ end }}

{{ define "title" }}
Resume Request | {{ .Site.Title }}
{{ end }}

{{ define "main" }}
<section id="resume-download" class="py-5">
  <div class="container">
    <div class="row justify-content-center">
      <div class="col-lg-8">
        <div class="download-container p-5 bg-light rounded shadow">
          <div class="text-center mb-4">
            <i class="fas fa-file-pdf fa-4x text-primary mb-4"></i>
            <h2 class="mb-3">Request My Resume</h2>
            <p class="lead">I'd love to connect! Click the button below to send me an email and I'll respond with my resume.</p>
          </div>

          <div class="text-center">
            <a href="mailto:mohith.n2022@gmail.com?subject=Resume Request&body=Hi Mohith,%0D%0A%0D%0AI'm interested in learning more about your background and would like to request access to your resume.%0D%0A%0D%0AName: %0D%0ACompany: %0D%0APurpose: %0D%0A%0D%0AThank you!"
               class="btn btn-primary btn-lg px-5 mb-4">
              <i class="fas fa-envelope me-2"></i>
              Send Email Request
            </a>
          </div>

          <div class="alert alert-info">
            <h5><i class="fas fa-info-circle me-2"></i>What happens next?</h5>
            <ul class="mb-0">
              <li>Your default email client will open with a pre-filled message</li>
              <li>Feel free to customize the message with your details</li>
              <li>I'll respond quickly with my resume and contact information</li>
            </ul>
          </div>

          <div class="contact-info mt-5">
            <div class="row justify-content-center">
              <div class="col-md-6 text-center mb-3">
                <div class="contact-item">
                  <i class="fab fa-linkedin fa-2x text-primary mb-2"></i>
                  <h5>LinkedIn</h5>
                  <a href="https://www.linkedin.com/in/mohith-nagendra/" target="_blank" class="btn btn-outline-primary">
                    Connect with me
                  </a>
                </div>
              </div>
            </div>
          </div>

          <div class="mt-4 text-center">
            <small class="text-muted">
              <i class="fas fa-shield-alt me-1"></i>
              I respond to all resume requests within 24 hours.
            </small>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>

<style>
.download-container {
  background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
  border: 1px solid #dee2e6;
}

.contact-item {
  padding: 1rem;
  border-radius: 10px;
  transition: transform 0.3s ease;
}

.contact-item:hover {
  transform: translateY(-5px);
}

.btn {
  border-radius: 25px;
  padding: 0.75rem 1.5rem;
  font-weight: 500;
  transition: all 0.3s ease;
}

.btn:hover {
  transform: translateY(-2px);
  box-shadow: 0 5px 15px rgba(0,0,0,0.2);
}

.alert-info {
  border-left: 4px solid #0dcaf0;
  background-color: #f8f9fa;
  border-radius: 10px;
}

/* Force black text for all elements */
#resume-download h2,
#resume-download h3,
#resume-download h4,
#resume-download h5,
#resume-download h6,
#resume-download p,
#resume-download .lead,
#resume-download .alert,
#resume-download .text-muted,
#resume-download small {
  color: #000000 !important;
}

#resume-download .download-container {
  background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%) !important;
  color: #000000 !important;
}

#resume-download .alert * {
  color: #000000 !important;
}

/* Dark mode overrides */
[data-theme="dark"] #resume-download h2,
[data-theme="dark"] #resume-download h3,
[data-theme="dark"] #resume-download h4,
[data-theme="dark"] #resume-download h5,
[data-theme="dark"] #resume-download h6,
[data-theme="dark"] #resume-download p,
[data-theme="dark"] #resume-download .lead,
[data-theme="dark"] #resume-download .alert,
[data-theme="dark"] #resume-download .text-muted,
[data-theme="dark"] #resume-download small {
  color: #000000 !important;
}

.dark #resume-download h2,
.dark #resume-download h3,
.dark #resume-download h4,
.dark #resume-download h5,
.dark #resume-download h6,
.dark #resume-download p,
.dark #resume-download .lead,
.dark #resume-download .alert,
.dark #resume-download .text-muted,
.dark #resume-download small {
  color: #000000 !important;
}
</style>
{{ end }}
document.getElementById('resumeForm').addEventListener('submit', function(e) {
  e.preventDefault();

  // Validate form
  if (!this.checkValidity()) {
    e.stopPropagation();
    this.classList.add('was-validated');
    return;
  }

  // Store form data
  const formData = new FormData(this);
  userFormData = {
    firstName: formData.get('firstName'),
    lastName: formData.get('lastName'),
    email: formData.get('email'),
    company: formData.get('company'),
    purpose: formData.get('purpose'),
    message: formData.get('message'),
    timestamp: new Date().toISOString()
  };

  // Show processing step
  showStep('processingStep');

  // Start progress animation
  animateProgress();

  // Send email (simulate the automated process)
  setTimeout(() => {
    sendResumeEmail();
  }, 3000);
});

function showStep(stepId) {
  // Hide all steps
  document.querySelectorAll('.step-content').forEach(step => {
    step.style.display = 'none';
  });

  // Show selected step
  document.getElementById(stepId).style.display = 'block';
}

function animateProgress() {
  const progressBar = document.getElementById('progressBar');
  let width = 0;
  const interval = setInterval(() => {
    width += 10;
    progressBar.style.width = width + '%';
    if (width >= 100) {
      clearInterval(interval);
    }
  }, 200);
}

function sendResumeEmail() {
  // Generate a unique password (in real implementation, this would be done server-side)
  const password = generatePassword();

  // Log the interaction for your records
  console.log('Resume request processed:', {
    ...userFormData,
    password: password,
    processedAt: new Date().toISOString()
  });

  // In a real implementation, you would:
  // 1. Call your backend API to send the email
  // 2. The backend would use a service like SendGrid, Mailgun, or AWS SES
  // 3. Email would contain the Google Drive link and password

  // For now, simulate successful email sending
  simulateEmailSending(password);
}

function generatePassword() {
  // Generate a secure password (8-10 characters, mix of letters and numbers)
  const chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';
  let password = '';
  for (let i = 0; i < 8; i++) {
    password += chars.charAt(Math.floor(Math.random() * chars.length));
  }
  return password;
}

function simulateEmailSending(password) {
  // This simulates what your automated email would contain
  const emailContent = `
    Subject: Resume Access - ${userFormData.firstName} ${userFormData.lastName}

    Hi ${userFormData.firstName},

    Thank you for your interest in my resume! Here's your secure access:

    ðŸ“„ Resume Link: https://drive.google.com/file/d/1_iffxAdiC3LP4J89VsUYr1q4dcgCc2AN/view?usp=sharing
    ðŸ” Password: ${password}

    I appreciate your interest in ${userFormData.purpose.replace('_', ' ')} and look forward to connecting with you.

    Best regards,
    Mohith Nagendra
    mohith.n2022@gmail.com
  `;

  console.log('Email content that would be sent:', emailContent);

  // Show success step
  showStep('successStep');
  document.getElementById('emailAddress').textContent = userFormData.email;
}

// Start over functionality
document.getElementById('startOverBtn').addEventListener('click', function() {
  showStep('formStep');
  document.getElementById('resumeForm').reset();
  document.getElementById('resumeForm').classList.remove('was-validated');
});
</script>

<style>
.form-control:focus, .form-select:focus {
  border-color: #0d6efd;
  box-shadow: 0 0 0 0.2rem rgba(13, 110, 253, 0.25);
}

.btn-primary {
  background-color: #0d6efd;
  border-color: #0d6efd;
}

.btn-primary:hover {
  background-color: #0b5ed7;
  border-color: #0a58ca;
}

.invalid-feedback {
  display: block;
}

.was-validated .form-control:invalid {
  border-color: #dc3545;
}

.was-validated .form-control:valid {
  border-color: #198754;
}

.download-container {
  background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
  border: 1px solid #dee2e6;
}

.step-content {
  min-height: 400px;
}

.success-icon {
  animation: bounce 2s infinite;
}

@keyframes bounce {
  0%, 20%, 50%, 80%, 100% {
    transform: translateY(0);
  }
  40% {
    transform: translateY(-10px);
  }
  60% {
    transform: translateY(-5px);
  }
}

.progress {
  height: 10px;
  border-radius: 5px;
}

.email-info {
  border-left: 4px solid #0dcaf0;
}

/* Force black text for form elements in both light and dark modes */
#resume-download .form-label,
#resume-download .form-control,
#resume-download .form-select,
#resume-download h2,
#resume-download h3,
#resume-download h4,
#resume-download h5,
#resume-download h6,
#resume-download p,
#resume-download .lead,
#resume-download .alert,
#resume-download .text-muted,
#resume-download small {
  color: #000000 !important;
}

/* Ensure form inputs maintain black text */
#resume-download .form-control::placeholder {
  color: #6c757d !important;
}

#resume-download .form-control:focus {
  color: #000000 !important;
}

/* Override theme colors for this section */
#resume-download .download-container {
  background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%) !important;
  color: #000000 !important;
}

/* Ensure alert text remains black */
#resume-download .alert * {
  color: #000000 !important;
}

/* Override any theme-specific text colors */
[data-theme="dark"] #resume-download .form-label,
[data-theme="dark"] #resume-download .form-control,
[data-theme="dark"] #resume-download .form-select,
[data-theme="dark"] #resume-download h2,
[data-theme="dark"] #resume-download h3,
[data-theme="dark"] #resume-download h4,
[data-theme="dark"] #resume-download h5,
[data-theme="dark"] #resume-download h6,
[data-theme="dark"] #resume-download p,
[data-theme="dark"] #resume-download .lead,
[data-theme="dark"] #resume-download .alert,
[data-theme="dark"] #resume-download .text-muted,
[data-theme="dark"] #resume-download small {
  color: #000000 !important;
}

/* Dark mode overrides */
.dark #resume-download .form-label,
.dark #resume-download .form-control,
.dark #resume-download .form-select,
.dark #resume-download h2,
.dark #resume-download h3,
.dark #resume-download h4,
.dark #resume-download h5,
.dark #resume-download h6,
.dark #resume-download p,
.dark #resume-download .lead,
.dark #resume-download .alert,
.dark #resume-download .text-muted,
.dark #resume-download small {
  color: #000000 !important;
}
</style>
{{ end }}
